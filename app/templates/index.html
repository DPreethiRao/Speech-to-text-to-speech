Ee code emo index.html


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask Text-to-Speech & Speech-to-Text</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        textarea, input {
            width: 100%;
            margin-bottom: 10px;
            padding: 10px;
        }
        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        audio, a {
            display: block;
            margin-top: 10px;
        }
        #recordedAudio {
            margin-top: 15px;
        }
    </style>
    <script>
        let mediaRecorder;
        let audioChunks = [];
        let recordingCount = 0;

        function startRecording() {
            navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
                mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.start();

                mediaRecorder.addEventListener("dataavailable", event => {
                    audioChunks.push(event.data);
                });

                document.getElementById("status").innerText = "Recording...";
            });
        }

        function stopRecording() {
            mediaRecorder.stop();

            mediaRecorder.addEventListener("stop", () => {
                recordingCount++;
                const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                const audioURL = URL.createObjectURL(audioBlob);

                // Create a new audio element for each recording
                const recordingsContainer = document.getElementById("recordings");

                const audioElement = document.createElement("audio");
                audioElement.controls = true;
                audioElement.src = audioURL;

                const transcriptElement = document.createElement("p");
                transcriptElement.id = transcript-${recordingCount};
                transcriptElement.innerText = "Transcribing...";

                const recordingDiv = document.createElement("div");
                recordingDiv.appendChild(audioElement);
                recordingDiv.appendChild(transcriptElement);
                recordingsContainer.appendChild(recordingDiv);

                const formData = new FormData();
                formData.append("audio", audioBlob);
                formData.append("filename", recording_${recordingCount}.wav);

                fetch("/transcribe", {
                    method: "POST",
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    transcriptElement.innerText = data.transcript;
                });

                audioChunks = []; // Clear audio chunks for the next recording
                document.getElementById("status").innerText = "";
            });
        }
    </script>
</head>
<body>    
    <!-- Text-to-Speech Form -->
    <form method="POST" enctype="multipart/form-data">
        <h1>Text-to-Speech</h1>
        <textarea name="text" placeholder="Enter text to convert to speech"></textarea>
        <button type="submit">Convert to Speech</button>
    </form>

    <h3>Generated Audio Files</h3>
    {% for audio in audio_files %}
        {% if audio.endswith('.mp3') %}
        <audio controls>
            <source src="{{ url_for('static', filename='audio/' + audio) }}" type="audio/mpeg">
        </audio>
        {% endif %}
    {% endfor %}

    <h1>Speech to Text</h1>
    <button onclick="startRecording()">Record</button>
    <button onclick="stopRecording()">Stop</button>
    <p id="status"></p>
    <h3>Recordings:</h3>
    <div id="recordings"></div>

</body>
</html>